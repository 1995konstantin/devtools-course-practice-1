# Лабораторная работа #1: Настройка окружения

<!-- TODO
  - Описать инсталляцию QtCreator

-->

## Цели

  1. Ознакомиться с общей процедурой приема лабораторных работ.
  1. Познакомиться с инфраструктурой GitHub + TravisCI и принятым там процессом
     разработки (на примере [Integration Manager Workflow][imworkflow]).
  1. Получить первичные навыки использования таких инструментов как Git,
     GoogleTest, CMake и QtCreator.

## Задачи

  1. Подготовить рабочее окружение
     - Установить и настоить все необходимые инструменты
     - Получить исходные коды, построить проект и запустить имеющиеся тесты
  1. Реализовать несколько модульных тестов на уже существующий компонент
  1. Интегрировать свои изменения в центральный репозиторий
     - Прислать изменения в виде pull request
     - Добиться прохождения автоматических проверок на TravisCI
     - Пройти рецензию кода

## Общий порядок выполнения

  1. Инсталлируйте и настройте Git, CMake и QtCreator.
  1. Зарегистрируйтесь на GitHub. Создайте свой форк [центрального
     репозитория][central-repo] и склонируйте его к себе на машину.
  1. Соберите проект и убедитесь в его работоспособности, запустив модульные
     тесты на компонент `kornyakov-kirill-zcalc`. Изучите общую организацию
     данного компонента.
  1. В отдельной ветке Git выполните задание лабораторной работы:
     - Создайте новую ветку Git с именем вида `kornyakov-lab1`.
     - В директории
       `devtools-course-practice/modules/kornyakov-kirill-zcalc/test/` заведите
       свой личный файл для тестов с именем вида
       `test_kornyakov_kirill_complex_number.cpp`.
     - Реализуйте в этом файле не менее 5 тестов на класс `ComplexNumber`. Если
       некоторые из ваших тестов будут падать по причине некорректной, на ваш
       взгляд, реализации, стоит оставить тесты, но приписать в начало их имени
       ключевое слово `DISABLED_`. В таком случае преподаватели смогут устранить
       найденный дефект.
     - Убедитесь, что ваши тесты компилируются и запускаются вместе с
       остальными.
  1. Пошлите свои измненения в виде pull request на GitHub и пройдите рецензию
     кода (два сокурсника и преподаватель).
     - Убедитесь, что ваши тесты компилируются и запускаются вместе с
       остальными уже на TravisCI.

## Типичные ошибки

Ниже приведены типичные ошибки, при наличии которых лабораторная не будет
принята:

  - Работа велась в ветке с именем `master`
  - Изменение файлов вне своего личного файла

## Детальные инструкции

### Первичная настройка

  1. Зарегистрируйтесь на GitHub. Предпочтительно использование аккаунта, из
     котого понятно ваше имя.
  1. Установите и настройте себе Git, используя инструкции например
     [отсюда][help-git-mp2] или [отсюда][help-git].
  1. Создайте форк [нашего проекта][central-repo], затем клонируйте репозиторий
     к себе на рабочую машину. Все необходимые инструкции можно найти
     [здесь][help-fork].
  1. Инсталлируйте приложение CMake.
  1. Инсталлируйте IDE QtCreator. В принципе, вы можете разрабатываться в IDE
     Microsoft Visual Studio, в любой другой IDE, или в простом текстовом
     редакторе.

### Выполнение лабораторной

  1. Создайте новую ветку, в которой вы будете работать над лабораторной:

        $ cd devtools-course-practice
        $ git checkout -b SECONDNAME-FIRSTNAME-lab1

  1. Сгенерируйте проект для какой-либо IDE при помощи CMake, скомпилируйте его
     в этой IDE и запустите тесты. Убедитесь, что все тесты проходят.

  1. Создайте новый файл для своих собственных тестов. Ему нужно дать имя вида
     `test_kornyakov_kirill_complex_number.cpp` и разместить в директории
     `devtools-course-practice/modules/kornyakov-kirill-zcalc/test/`. Можете
     использовать следующую заготовку для начала.

     ```cpp
     // Copyright 2016 Kornyakov Kirill

     #include <gtest/gtest.h>

     #include "include/complex_number.h"

     TEST(Kornyakov_Kirill_ComplexNumberTest, Can_Create_Zero) {
         // Arrange
         double re = 0.0;
         double im = 0.0;

         // Act
         ComplexNumber z(re, im);

         // Assert
         EXPECT_EQ(re, z.getRe());
         EXPECT_EQ(im, z.getIm());
     }
     ```

  1. Он автоматически подцепится, нужно только перегенерировать проект при
     помощи CMake.

  1. Заполните `README.md` информацией, по образу файла в директории
     `code/kirill-kornyakov`. Просьба следить за грамматикой и корректностью
     [синтаксиса Markdown][gfm]. Также рекомендуется использовать кодировку
     UTF-8. Когда закончите, нужно сделать локальный коммит в Git:

        $ git add README.md
        $ git commit -m "Added README.md file"

  1. Далее сделайте push в свой форк проекта:

        $ git push origin HEAD

  1. Проверьте, что GitHub корректно рендерит ваш файл. Для этого нужно выбрать
     вашу ветку (`surname-name-lab1`), найти ваш файл в браузере кода, и
     кликнуть по нему. GitHub отобразит отрендеренный файл. Если нужно будет
     что-то поправить, используйте следующие команды:

        ... README.md editing ...
        $ git add README.md
        $ git commit -m "Fixed Markdown syntax"
        $ git push origin HEAD

### Ревью кода

  1. После этого нужно сделать [pull-request][help-pr] в центральный
     репозиторий. В названии pull-request нужно указать свою фамилию и номер
     лабораторной, например _"Корняков - Лабораторная работа #0"_.
  1. Первым делом необходимо убедиться, что успешно прошло тестирование на
     [Travis CI][travis]. Вероятность того, что что-то пойдет не так невелика,
     но ниже приведены инструкции на тот случай, если что-то нужно поправить.
  1. Далее необходимо пройти ревью кода от двух своих сокурсников. Пригласите их
     к дискуссии, дабавив в pull reqeust комментарий вида @github-name (например
     @kirill-kornyakov).
  1. Если будут замечания к вашему коду, вам нужно добавлять коммиты в
     свою ветку, и пулл-реквест будет автоматически обновляться.

        $ git add README.md
        $ git commit -m "Fixing comments by Kirill Kornyakov"
        $ git push origin HEAD

  1. Когда вы получите два комментария вида :+1: (пишется как `:+1:`). Наличие
     такого значка фактически означает одобрение коллегой ваших изменений. Затем
     необходимо аналогичным образом пригласить одного из преподавателей и пройти
     окончательное ревью.

После прохождения ревью код будет влит в основную ветку `master`, и лабу можно
считать завершенной. Датой сдачи лабораторной будет считаться дата вливания.

<!-- LINKS -->

[group]:        https://groups.google.com/forum/#!forum/devtools-course
[topics]:       https://docs.google.com/spreadsheet/ccc?key=0AsBBkrQIoSbjdEdTUFRsaUw3LV92eVhwXzYtb0tZNHc#gid=3
[travis]:       https://travis-ci.org/UNN-VMK-Software/devtools-course-practice/pull_requests
[central-repo]: https://github.com/UNN-VMK-Software/devtools-course-practice

[help-git-mp2]: https://github.com/UNN-VMK-Software/mp2-lab1-set#Инструкция-по-выполнению-работы
[help-git]:     https://help.github.com/articles/set-up-git
[help-fork]:    https://help.github.com/articles/fork-a-repo
[help-pr]:      https://help.github.com/articles/using-pull-requests
[gfm]:          https://help.github.com/articles/github-flavored-markdown
[imworkflow]:   https://git-scm.com/book/en/v2/Distributed-Git-Distributed-Workflows#Integration-Manager-Workflow

<!-- BACKUP
  1. Выберите себе свободную тему из [списка][topics], вписав свое имя и группу.

    1. В подпапке `code` заведите папку со своим именем (вида `surname-name`), и
     поместите туда файл `README.md`. Это будет ваша wiki страничка в формате
     Markdown со всеми деталями о вашем проекте.

        $ cd code
        $ mkdir surname-name
        $ cd surname-name
        $ touch README.md
-->
